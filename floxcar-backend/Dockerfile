# floxcar-backend/Dockerfile
FROM node:20-alpine

WORKDIR /app

# Installer TOUTES les d√©pendances
COPY package*.json ./
RUN npm ci

# Copier le code
COPY . .

# üî• Compiler le TypeScript ‚Üí cr√©e dist/
RUN npm run build

# Ex√©cuter migrations + seed + d√©marrer
CMD ["sh", "-c", "npx prisma migrate deploy && npx prisma db seed && node dist/server.js"]